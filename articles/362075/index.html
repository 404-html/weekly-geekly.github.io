<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lighting control and voice weather alerts on the Raspbery Pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lighting control and voice weather alerts. Sample code and electrical connection diagram of the relay to the Raspberry Pi. 

 Pre-install mplayer and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lighting control and voice weather alerts on the Raspbery Pi</h1><div class="post__text post__text-html js-mediator-article">  Lighting control and voice weather alerts.  Sample code and electrical connection diagram of the relay to the Raspberry Pi. <br><a name="habracut"></a><br>  Pre-install <b>mplayer</b> and <b>alsa</b> : <br><pre><code class="bash hljs">sudo apt-get install alsa-utils sudo apt-get install mplayer</code> </pre> <br>  Also install <b>pip</b> for Python for easy installation of packages.  And then install it with <b>feedparser</b> .  I will not tell, it is easier to find information on the query ‚Äúinstall pip python‚Äù in a search engine. <br><br>  <b>The code for the WebIOPi script itself:</b> <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#     utf8,     # -*- coding: utf-8 -*- #   import webiopi import subprocess import feedparser #  GPIO GPIO = webiopi.GPIO #     GPIO LIGHT = 23 BUTTON1 = 17 BUTTON2 = 22 def setup(): #   GPIO GPIO.setFunction(LIGHT, GPIO.OUT) GPIO.setFunction(BUTTON1, GPIO.IN) GPIO.setFunction(BUTTON2, GPIO.IN) def loop(): #    1 if (GPIO.digitalRead(BUTTON1) == GPIO.HIGH): #     ( ) GPIO.digitalWrite(LIGHT, not GPIO.digitalRead(LIGHT)) #    2 if (GPIO.digitalRead(BUTTON2) == GPIO.HIGH): #    subprocess.call(["mplayer", "http://translate.google.com/translate_tts?tl=ru&amp;ie=UTF-8&amp;q=, ,  ."]) #   d = feedparser.parse('http://rp5.kz/rss/76334/ru') #   subprocess.call(["mplayer", "http://translate.google.com/translate_tts?tl=ru&amp;ie=UTF-8&amp;q="+d.entries[0].title]) def destroy(): #  ,   ) GPIO.digitalWrite(LIGHT, GPIO.LOW)</span></span></code> </pre><br><br>  <b>Scheme:</b> <br><img src="https://habrastorage.org/files/4f0/271/9ec/4f02719ecfd34a43bf50d2cfa0078b1f.png"><br><br>  Transistor of any <i>NPN</i> structure, I used the Soviet <i>KT961B</i> , any one will work for switching mode operation.  Pick resistance for the required opening current of the transistor.  I took the <i>SRI-05VDC-SD-C</i> relay with a voltage of 5 volts and a maximum current for contacts 10A.  Diode <i>1N4001</i> seems to be necessary to remove the self-induction effect of the relay coil, otherwise we hit the transistor and the raspberry leg.  The earth on the transistor is common with the power relay and raspberry. <br>  <b>Do not power the relay from GPIO!</b>  Burn "raspberries".  Before powering, you can turn on the relay.  And so preferably a separate power source for such pieces.  The relay can be at 12 volts.  Please do not blame me for burnt raspberries, do everything at your own peril and risk.  You must be able to hold a soldering iron and know the basics of working with electrical circuits.  Be careful about 220 volts!  This is deadly. </div><p>Source: <a href="https://habr.com/ru/post/362075/">https://habr.com/ru/post/362075/</a></p>
<section class="all-articles-navigation-panel js-all-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><p>Waiting for the list form <a href="../../index.html">here</a>...</p></nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>