<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Telegram client in PHP (and receiving messages using MadelineProto)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Having decided to tackle a shameless copy-paste (or rather, its automation) of posts from someone else's Telegram channel into my own, I first got int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Telegram client in PHP (and receiving messages using MadelineProto)</h1><div class="post__text post__text-html js-mediator-article">  Having decided to tackle a shameless copy-paste (or rather, its automation) of posts from someone else's Telegram channel into my own, I first got into the documentation on telegram bots.  But as it turned out, bots not only have no methods for receiving messages, they simply cannot be added to another channel. <br><br>  The solution was needed in PHP and the next hour was spent searching for it.  It's amazing how little information is available about it <i>(although no, not surprising ... who writes this in PHP at all ...)</i> .  In general, the road with StackOverflow led to <b><a href="https://docs.madelineproto.xyz/API_docs/">MadelineProto</a></b> .  The library has quite a few links on the net. <br><br>  What is <b>Madeline</b> ? <a name="habracut"></a>  This is a PHP telegram client that provides methods for working both on behalf of the user and on behalf of the bot.  The purpose of the article is first of all to shorten the <b>Madeline</b> search path and draw attention to it.  It is also interesting to learn from habravchan that there is a similar on other PL? <br><br>  Well, of course, publish for example a piece of code that solved my problem: <br><br><pre><code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Madeline —Å –≥–∏—Ç—Ö–∞–±–∞ if (!file_exists(__DIR__ . '/madeline.php')) { copy('https://phar.madelineproto.xyz/madeline.php', __DIR__ . '/madeline.php'); } include __DIR__ . '/madeline.php'; $MadelineProto = new \danog\MadelineProto\API('session.madeline'); $MadelineProto-&gt;start(); $me = $MadelineProto-&gt;get_self(); \danog\MadelineProto\Logger::log($me); /* –ü–æ–ª—É—á–∏–º –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π */ $messages = $MadelineProto-&gt;messages-&gt;getHistory([ /* –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞, –±–µ–∑ @ */ 'peer' =&gt; 'chatname', 'offset_id' =&gt; 0, 'offset_date' =&gt; 0, 'add_offset' =&gt; 0, 'limit' =&gt; 20, 'max_id' =&gt; 9999999, /* ID —Å–æ–æ–±—â–µ–Ω–∏—è, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ–º –ø–æ–∏—Å–∫ */ 'min_id' =&gt; $lastid, ]); /* –°–æ–æ–±—â–µ–Ω–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É) */ $messages = $messages['messages']; foreach(array_reverse($messages) as $i =&gt; $message){ /* –®–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Å–≤–æ–π –∫–∞–Ω–∞–ª */ $MadelineProto-&gt;messages-&gt;sendMessage([ 'peer' =&gt; 'mychatname', 'message' =&gt; $message['message'] ]); }</span></span></code> </pre> <br><br>  UPD from <a href="https://habr.com/users/mopkob/" class="user_link">mopkob</a> : The project has an active community: the <a href="http://t.me/pwrtelegramgroupru">Russian-speaking @pwrtelegramgroupru</a> and the international <a href="http://t.me/pwrtelegramgroup">@pwrtelegramgroup</a> . </div><p>Source: <a href="https://habr.com/ru/post/433268/">https://habr.com/ru/post/433268/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><p>Waiting for the list form <a href="../../index.html">here</a>...</p></nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>