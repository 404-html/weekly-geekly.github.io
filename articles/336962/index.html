<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The flaw in formatting Swift blocks in Xcode</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think that all of us who write on Swift, even occasionally, used such a construction of the language as blocks. But there is one nuance with these b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-6974184241884155",
      enable_page_level_ads: true
    });
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The flaw in formatting Swift blocks in Xcode</h1><div class="post__text post__text-html js-mediator-article">  I think that all of us who write on <b>Swift,</b> even occasionally, used such a construction of the language as blocks.  But there is one nuance with these blocks, which is very annoying: in Xcode, the formatting of the code does not quite work correctly with respect to them, or rather, indentation suffers. <br><br>  They suffer if the block is multiline and is specified as one of the parameters when the method is called, and the code is formatted line by line, that is, the parameter is indicated on a separate line. <br><a name="habracut"></a><br>  In this case, the simplest and most typical formatting works well: <br><br><pre><code class="hljs cs">DispatchQueue.main.<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ok } DispatchQueue.main.async(execute: { // ok })</span></span></code> </pre> <br>  But it is worth transferring the indication of the parameter to a separate line, as the disco begins: <br><br><pre> <code class="hljs cs">DispatchQueue.main.<span class="hljs-keyword"><span class="hljs-keyword">async</span></span>( execute: { <span class="hljs-comment"><span class="hljs-comment">// wrong } )</span></span></code> </pre><br>  However, if you add a seizure, then everything works naura: <br><br><pre> <code class="hljs sql">DispatchQueue.main.async( <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span>: { [weak <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> // ok } ) DispatchQueue.main.async( <span class="hljs-keyword"><span class="hljs-keyword">execute</span></span>: { [unowned <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> // ok } )</code> </pre><br>  I wrote about the problem at Apple, and it seems that they have long been aware of it. <br>  Here I have to use the capture, just to keep the formatting. <br><br>  Unfortunately, besides solving the main problem, this method creates another problem - <b>warnings</b> that <b>self is</b> not used inside the block.  But personally, I <b>find</b> it easier to come to terms with such <b>warnings</b> , than to observe downed indents. <br><br>  If someone did not know and someone the note would be useful, then good. <br>  If someone knows how the described problem can be solved more concisely, I will be glad to know. </div><p>Source: <a href="https://habr.com/ru/post/336962/">https://habr.com/ru/post/336962/</a></p>
<section class="all-articles-navigation-panel js-all-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><p>Waiting for the list form <a href="../../index.html">here</a>...</p></nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>