<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why I do not believe microbench marks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think that this one screenshot of a real - life performance measurement is enough to convey the meaning of the article, but if the reader is interes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="https://quick-geek.github.io/search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <section class="page js-page"><h1>Why I do not believe microbench marks</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/fy/9l/hk/fy9lhkhouin1qqbuqgxsbxua5hq.png" alt="typescript is faster than javascript and takes up less memory.  Screenshot from the microbenchmark site"><br>  I think that this one screenshot of a real <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/typescript.html">-</a> life performance measurement is enough to convey the meaning of the article, but if the reader is interested in my thoughts on this subject, then welcome. <a name="habracut"></a></p><br><p>  Programmers are obsessed with the speed of program execution.  We follow the speed even where this speed is not very important.  Sometimes contrary to common sense and logic.  Not even fully understanding what the words ‚Äúspeed‚Äù or ‚Äúperformance‚Äù really mean in each particular case.  We still want the fastest hardware, the fastest language, and the lightest framework. </p><br><p>  I readily believe that you, username, are not like that.  That you yourself are able to write the right benchmark, you know how this or that runtime works, you hate speed optimization just for the sake of speed optimization and you know a lot about hardware.  But there are more people from the previous paragraph.  Checked. </p><br><p>  Seeing the example in the picture above, I first choked on coffee ... <br>  - How can typescript work faster than javascript, and at the same time eat several times less memory? <br>  - No! </p><br><p>  Typescript does not have its own runtime.  That is, you cannot run typescript anywhere or <a href="https://github.com/denoland/deno">almost</a> anywhere.  You must first compile it into javascript, which you then run in runtime, which this same javascript understands.  In this case, node v11.3434 acted as such a runtime.  By happy coincidence, the same runtime example runs on a javascript example. <br>  Instead of comparing languages, we get a micro-competition on sports programming. </p><br><p>  ‚Üí <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/program/mandelbrot-typescript-2.html">Typescript code</a> <br>  ‚Üí Javascript <a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/program/mandelbrot-node-1.html">code</a> </p><br><p>  It turns out that the execution time, memory consumption and other characteristics critically depend on who and how this verification code was written.  Of course, here you can drag by the ears the argument that typescript <strong>makes you</strong> write "the right code."  But no one will hurt to compile typescript in javascript, and I haven‚Äôt seen any places with optimizations either. </p><br><p>  By the way, how long have you seen someone write a similar code, and he was reviewing?  Solid, OOP and OP here and does not smell.  The code is written explicitly in a procedural style.  Because his task is different.  Understand correctly, although the code solves the problem, it requires refactoring before production.  And it is unknown how refactoring will affect performance.  But this is probably a niggle. </p><br><p>  With an example sorted out.  Obviously, the example is inadequate. <br>  But let's see how other programming languages ‚Äã‚Äãpassed the same test. <br><img src="https://habrastorage.org/webt/dh/mg/dy/dhmgdyngkjwoqlhgqlsui9btlvu.png" alt="list of results for other languages.  Screenshot from the same site"></p><br><p>  What do you think, how correct is it to conclude that Swift is faster than Go?  I think that is wrong.  It suffices to see that the two implementations on Rust (2 and 6 line) differ in time by 2 times. </p><br><p>  And here the problem looks more serious.  If the comparison of typescript and javascript is perceived as a joke, then in the case of other languages ‚Äã‚Äãthe problem is not so obvious.  And would you begin to understand what was the matter if you saw such a report? <br><img src="https://habrastorage.org/webt/jb/0a/ls/jb0alsvzy-srxxunner8r8o3xn0.png" alt="Comparing go and swift.  Screenshot.  It looks like swift is faster"></p><br><p>  It turns out that the benchmark code needs to be closely checked. </p><br><p>  Question: When was the last time you saw a person who climbs to double-check how the code of benchmarks was written immediately after seeing standard beautiful graphics of performance? <br>  I meet these very rarely.  I think that such engineers are vanishingly small. </p><br><p>  On the other hand, there are many examples before our eyes, when on the basis of such tests a conclusion is drawn about the performance and lightness of the technology.  And, by the way, public opinion is forming. <br>  Here you can compare the performance of the main frameworks in javascript. <br><img src="https://habrastorage.org/webt/oz/nt/cz/ozntczbno15gqywrcr5i7fdjlj0.png" alt="js frameworks comparison results. Screenshot"><br>  Do you still trust the results?  Me not. <br>  That's all.  But there is good news.  The programmer's skill still strongly influences program performance. </p><br><p>  <strong>Conclusion:</strong> <br>  Microbench marks will not show you anything if you are not a professional in performance for a specific platform.  And even better, you yourself write these benchmarks taking into account your requirements and conditions, while understanding what you are doing. </p><br><p>  <strong>PS:</strong> <br>  The post is written as a response to hasty comparisons and conclusions about future performance.  Of course, all the conclusions and arguments from the article can be cited without this example, but with numbers and specifics it is more fun and clearer. </p></div><p>Source: <a href="https://habr.com/ru/post/433060/">https://habr.com/ru/post/433060/</a></p>
<section class="navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><p>Waiting for the list form <a href="../../index.html">here</a>...</p></nav>
</section>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>
</body>

</html>